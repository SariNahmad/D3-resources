<!doctype html - 14/15 tree layout (hierarchical relationships) rotate sideways>
<html>
    
<head>
    <title> D3 tutorial</title>
    <script src = "http://d3js.org/d3.v3.min.js"></script>
</head>

<body>
    
    <script>

        var width = 500
        var height = 500 
        var padding = 25 
        var tree_padding = 300
        
        var canvas = d3.select("body").append("svg")
                .attr("width", width - padding)
                .attr("height", height - padding)
                .append("g")
                    .attr("transform", "translate(50,50)");
        
        var tree = d3.layout.tree()
            .size([width - tree_padding, height - tree_padding]);
        
        d3.json("inventory.json", function(data){
            
            var nodes = tree.nodes(data);
            var links = tree.links(nodes);
            
            var color = d3.scale.linear()
                .domain([0,3])
                .range(["red", "blue"]);
                
            
            var node = canvas.selectAll(".node")
                .data(nodes)
                .enter()
                .append("g")
                    .attr("class", "node")
                    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")" })
            
            node.append("circle")
                .attr("r", 20)
                .attr("opacity", .75)
                .attr("fill", function(d){ return color(d.value);});
            
            node.append("text")
                .text(function (d) {return d.name;})
                .attr("transform", "translate(10,5)")
            
            var diagonal = d3.svg.diagonal()
                .projection(function(d){return [d.x, d.y]})
            
            canvas.selectAll(".link")
                .data(links)
                .enter()
                .append("path")
                .attr("class", "link")
                .attr("fill", "none")
                .attr("stroke", "grey")
                .attr("d", diagonal);
            
        })
                
    </script>
    
</body>
    
</html>